 

2024年3月8日

10:30

 

健康160

1 hashmap并发会出现什么问题

1.7 头插法 会导致指针混乱

t1 t2 同时要对hashmap扩容 t1休眠 t2完成扩容后 俩个线程会出现指针混乱

1.8 尾插法 会导致值覆盖

2 什么是线程安全，如何解决

多个线程并发的操作一个共享变量

解决：

volatile 保证内存可见性 线程a操作之后的结果对线程b是可见的

锁：lock和synchronized 来保证线程安全

> synchronized 关键字 lock接口
>
> 不需要手动释放 需要手动释放锁
>
> 非公平锁 支持公平和非公平锁
>
> 底层实现 objectMonitor AQS

3 aba问题如何解决

加锁

4 分布式锁的实现 redis做分布式锁什么情况下会死锁 怎么解决

> 未指定过期时间         set lock ex 30 nx 用这个命令去实现 或者zookeeper的临时有序节点做分布式锁去避免死锁

5 网络卡顿怎么排查

> top指令观察是否有cpu偏高线程 如果有 jstack，jmap去分析堆 和线程栈信息
>
> 没有的话 去优化业务sql
>
> explain 去看sql的执行计划 保证查询走索引
>
> 索引失效 like 模糊查询 in 判断is null 所有列上面有函数计算 联合索引 最左匹配原则 abc 查询条件必须是abc顺序                                 碰到范围查询等会导致索引失效

6 sql优化，索引失效的情景

7 什么是幂等性，接口幂等性怎么保证

> 同一个接口发起多次请求 保证结果是一致的

8 redis集群的原理

> redis集群是无中心的
>
> redis集群有一个ping-pang机制
>
> 投票机制，redis集群节点的数量必须是2n+1
>
> redis集群中默认分配了16384个hash槽，在存储数据时，就会将key进行crc16算法，然后堆16384取余 去得到存储的位置没一个节点维护相应的hash槽

9 redis的持久化

> rdb 每隔一定的时间间隔做一次数据快照 传输快 二进制文件 最后一次持久化后的数据可能会丢失
>
> aof 保存所有的写操作命令 传输慢 文本文件，到后期文件会比较大，传输困难
