# 文档

## 流程

业务方传变量参数和发送方式,消息中心查模板替换变量，发送第三方

## 消息模版配置

1. 需求文档：<https://doc.weixin.qq.com/doc/w3_AToAMgZEALgCN9aT93CXERiaFHEJF?scode=AKMAwAfUAF4hEFTX8oAToAMgZEALg>
2. 根据消息文档配置消息中心模板配置：
   1. 文档地址：<https://doc.weixin.qq.com/sheet/e3_AdIA2wZUAJ4CNtrSqRbSHSOmafEJc?scode=AKMAwAfUAF4WV9IoIrAdIA2wZUAJ4>
   2. 配置样例：

      ```json
      模版id：pt_inquiry_0000003
      标题：通话提醒
      场景：语音、视频问诊预约提前5分钟通知（点击开始咨询时，出现申请小程序订阅消息）
      短信模版：
      2.1新模版id：SMS_498325400

      普通站内信内容：
      {就诊人}有一个{医生姓名}医生的{预约服务}将会在{预约时间}开始，请提前点击进入问诊诊室等待医生发起邀请
      您好，{patientName}有一个{doctorName}医生的{reserveService}将会在{reserveTime}开始，请提前点击进入问诊诊室等待医生发起邀请

      微信模版内容:
      预约开始提醒
      就诊人{{thing2.DATA}}
      预约时间{{time3.DATA}}
      医生姓名{{thing4.DATA}}
      预约服务{{thing5.DATA}}
      备注{{thing6.DATA}}
      跳转文案点击查看详情

      短信模版：
      您好，您申请的{医生姓名}医生的{预约服务}将于{开始时间}开始，请打开“元骁健康”小程序，等待医生发起邀请。
      您好，您申请的${doctorName}医生的${reserveService}将于${reserveTime}开始，请打开“元骁健康”小程序，等待医生发起邀请。

      ai语音模版：
      您好，元贝贝互联网医院提醒您，您预约的{医生姓名}医生的视频问诊即将开始，您可以打开元骁健康小程序等待医生发起邀请。感谢您的接听，祝您早日康复

      您好，元贝贝互联网医院提醒您，您预约的${doctorName}医生的视频问诊即将开始，您可以打开元骁健康小程序等待医生发起邀请。感谢您的接听，祝您早日康复

      跳转：IM页面

      发送方式：
      {
         "smsParam": {
            "isAvailable": true,
            "smsChannel": "1",
            "smsType": "1",
            "templateId": "SMS_498325400"
         },
         "wxPublicChatParam": {
            "isAvailable": true,
            "wxType": "2",
            "templateId": "VXhxZzYV4ayRV8qCR2d2Jv_hz0J98j1sYxL7JuEy52w"
         },
         "appInBoxParam": {
            "isAvailable": true,
            "appInBoxType": "3"
         },
         "voiceCallParam": {
            "isAvailable": true,
            "templateId": "TTS_326290133"
         }
      }
      变量参数：
      [
         {
            "codeDesc": "就诊人",
            "code": "patientName",
            "wxCode": "thing2"
         },
         {
            "codeDesc": "预约时间",
            "code": "reserveTime",
            "smsCode": "reserveTime",
            "wxCode": "time3"
         },
         {
            "codeDesc": "医生姓名",
            "code": "doctorName",
            "smsCode": "doctorName",
            "voiceCode": "doctorName",
            "wxCode": "thing4"
         },
         {
            "codeDesc": "预约服务",
            "code": "reserveService",
            "smsCode": "reserveService",
            "wxCode": "thing5"
         },
         {
            "codeDesc": "备注",
            "wxCode": "thing6"
         },
         {
            "voiceCode": "minutes"
         }
      ]
      ```

   3. sql样例：

        ```sql
      INSERT INTO ylx_boot_dev.yl_message_center_template (id, tenant_id, template_code, template_title, template_name, scene_desc, template_content, wx_template_content, sms_template_content, voice_template_content, send_type_param, template_param, subscription_type, subscription_object, avatar, create_by, create_time, update_by, update_time, del_flag) VALUES (500, 1, 'pt_inquiry_0000003', '通话提醒', '通话提醒', '语音、视频问诊预约提前5分钟通知', '${patientName}有一个${doctorName}医生的${reserveService}将会在${reserveTime}开始，请提前点击进入问诊诊室等待医生发起邀请', '预约开始提醒
                  就诊人{{thing2.DATA}}
                  预约时间{{time3.DATA}}
                  医生姓名{{thing4.DATA}}
                  预约服务{{thing5.DATA}}
                  备注{{thing6.DATA}}
                  跳转文案点击查看详情', '您好，您申请的${doctorName}医生的${reserveService}将于${reserveTime}开始，请打开“元骁健康”小程序，等待医生发起邀请', '您好，元贝贝互联网医院提醒您，您预约的${doctorName}医生的视频问诊即将开始，您可以打开元骁健康小程序等待医生发起邀请。感谢您的接听，祝您早日康复', '{
                                                   "smsParam": {
                                                      "isAvailable": true,
                                                      "smsChannel": "1",
                                                      "smsType": "1",
                                                      "templateId": "SMS_498325400"
                                                   },
                                                   "wxPublicChatParam": {
                                                      "isAvailable": true,
                                                      "wxType": "2",
                                                      "templateId": "VXhxZzYV4ayRV8qCR2d2Jv_hz0J98j1sYxL7JuEy52w"
                                                   },
                                                   "appInBoxParam": {
                                                      "isAvailable": true,
                                                      "appInBoxType": "3"
                                                   },
                                                   "voiceCallParam": {
                                                      "isAvailable": true,
                                                      "templateId": "TTS_326290133"
                                                   }
                                                }', '[
                                    {
                                          "codeDesc": "就诊人",
                                          "code": "patientName",
                                          "wxCode": "thing2"
                                    },
                                    {
                                          "codeDesc": "预约时间",
                                          "code": "reserveTime",
                                          "smsCode": "reserveTime",
                                          "wxCode": "time3"
                                    },
                                    {
                                          "codeDesc": "医生姓名",
                                          "code": "doctorName",
                                          "smsCode": "doctorName",
                                          "voiceCode": "doctorName",
                                          "wxCode": "thing4"
                                    },
                                    {
                                          "codeDesc": "预约服务",
                                          "code": "reserveService",
                                          "smsCode": "reserveService",
                                          "wxCode": "thing5"
                                    },
                                    {
                                          "codeDesc": "备注",
                                          "wxCode": "thing6"
                                    }
                                 ]', null, null, null, 'zhengqiang', '2025-06-11 12:45:40', null, null, '0')
       ```

3. 前期用sql插入，后期会有页面配置
   1. ![alt text](image-7.png)

## 发送方式

### 站内信

### 短信

### 微信

### app推送

### 企业微信

### 语音
